name: os2edu-cli
# ciè§¦å‘çš„æ¡ä»¶
on:
  push: # ä»€ä¹ˆè¯·æ±‚è§¦å‘
    branches: 
    - main # ä½œç”¨åœ¨å“ªäº›åˆ†æ”¯ä¸Š

jobs: # æ„å»ºçš„ä»»åŠ¡ï¼Œä¸€ä¸ªå·¥ä½œæµæœ‰å¤šä¸ªæ„å»ºä»»åŠ¡ï¼Œ
  build:
    name: deploy-build
    runs-on: ubuntu-latest # åœ¨ä»€ä¹ˆæœåŠ¡å™¨ä¸Šé¢æ‰§è¡Œè¿™äº›ä»»åŠ¡ï¼Œè¿™é‡Œä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ubuntu
    
    steps: 
      - name: Checkout # æ­¥éª¤åç§°
        uses: actions/checkout@v3
      
      - name: use node
        uses: actions/setup-node@v3
        with:
          node-version: '16.17.0' # nodeç‰ˆæœ¬
          cache: 'yarn'

      - name: install
        run: yarn install
    
      - name: build      
        run: yarn build
          
      - name: export
        run: yarn export

      - name: éƒ¨ç½² ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: gh-pages
          folder: out
          clean: true
        
      # - name: start
      #   run: pm2 start yarn --name  os2edu -- start
